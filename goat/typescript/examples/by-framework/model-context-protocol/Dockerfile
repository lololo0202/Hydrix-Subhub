# Generated by https://smithery.ai. See: https://smithery.ai/docs/config#dockerfile
FROM node:lts-alpine

# Set working directory in the container
WORKDIR /app

# Set environment variables with dummy values to allow server startup
ENV WALLET_PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000001
ENV RPC_PROVIDER_URL=http://127.0.0.1:8545

# Copy package files and tsconfig
COPY package*.json ./
COPY tsconfig.json ./

# Install dependencies (skip scripts to avoid unwanted side effects), then build the project
RUN npm install --ignore-scripts

# Copy the rest of the project files
COPY . .

# Build the project
RUN npm run build

# Set the command to run the MCP server (using the EVM artifact by default)
CMD ["node", "./build/evm.js"]
